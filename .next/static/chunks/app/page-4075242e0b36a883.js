(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{870:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>ej});var s=t(5155),r=t(2115),n=t(704),l=t(2596),i=t(9688);function o(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,i.QP)((0,l.$)(a))}function d(e){let{className:a,...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"tabs",className:o("flex flex-col gap-2",a),...t})}function c(e){let{className:a,...t}=e;return(0,s.jsx)(n.B8,{"data-slot":"tabs-list",className:o("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function u(e){let{className:a,...t}=e;return(0,s.jsx)(n.l9,{"data-slot":"tabs-trigger",className:o("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function x(e){let{className:a,...t}=e;return(0,s.jsx)(n.UC,{"data-slot":"tabs-content",className:o("flex-1 outline-none",a),...t})}function m(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card",className:o("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function h(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:o("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function p(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:o("leading-none font-semibold",a),...t})}function g(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:o("text-muted-foreground text-sm",a),...t})}function f(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:o("px-6",a),...t})}var v=t(9708),j=t(2085);let b=(0,j.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function y(e){let{className:a,variant:t,size:r,asChild:n=!1,...l}=e,i=n?v.DX:"button";return(0,s.jsx)(i,{"data-slot":"button",className:o(b({variant:t,size:r,className:a})),...l})}function N(e){let{className:a,type:t,...r}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:o("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...r})}var w=t(5863);function k(e){let{className:a,value:t,...r}=e;return(0,s.jsx)(w.bL,{"data-slot":"progress",className:o("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...r,children:(0,s.jsx)(w.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})}var C=t(3925);function S(e){let{onDataLoaded:a,onError:t,loading:n,setLoading:l}=e,[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(0),u=(0,r.useRef)(null),x=async e=>{if(!e||0===e.length)return;let s=e[0],r=s.name.toLowerCase().substring(s.name.lastIndexOf("."));if(![".xlsx",".xls",".csv"].includes(r))return void t("Formato de archivo no v\xe1lido. Solo se permiten archivos .xlsx, .xls y .csv");l(!0),c(0);try{let e=new FileReader;e.onprogress=e=>{if(e.lengthComputable){let a=Math.round(e.loaded/e.total*100);c(a)}},e.onload=e=>{try{var s;let n,l=null==(s=e.target)?void 0:s.result,i=(n=".csv"===r?C.LF(l,{type:"string"}):C.LF(l,{type:"array"})).SheetNames[0],o=n.Sheets[i],d=C.Wp.sheet_to_json(o,{header:1,defval:""});if(0===d.length)return void t("El archivo est\xe1 vac\xedo");let x=d[0],m=d.slice(1).map((e,a)=>{let t={};return x.forEach((a,s)=>{let r=e[s];t[a||"Columna_".concat(s+1)]=void 0!==r?r:""}),t}).filter(e=>Object.values(e).some(e=>""!==e&&null!=e));if(0===m.length)return void t("No se encontraron datos v\xe1lidos en el archivo");c(100),a(m),u.current&&(u.current.value="")}catch(e){console.error("Error parsing file:",e),t("Error al procesar el archivo. Verifica que el formato sea correcto.")}finally{l(!1)}},e.onerror=()=>{t("Error al leer el archivo"),l(!1)},".csv"===r?e.readAsText(s):e.readAsArrayBuffer(s)}catch(e){console.error("Error handling file:",e),t("Error inesperado al procesar el archivo"),l(!1)}},m=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?o(!0):"dragleave"===e.type&&o(!1)};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(i?"border-primary bg-primary/5":"border-border hover:border-primary/50"," ").concat(n?"pointer-events-none opacity-50":""),onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:e=>{e.preventDefault(),e.stopPropagation(),o(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&x(e.dataTransfer.files)},children:[(0,s.jsx)(N,{ref:u,type:"file",className:"hidden",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&x(e.target.files)},accept:".xlsx,.xls,.csv",disabled:n}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-medium",children:n?"Procesando archivo...":"Arrastra tu archivo aqu\xed"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"o haz clic para seleccionar"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Formatos soportados: .xlsx, .xls, .csv"})]}),(0,s.jsx)(y,{onClick:()=>{var e;null==(e=u.current)||e.click()},disabled:n,variant:"outline",children:n?"Cargando...":"Seleccionar Archivo"})]})]}),n&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Procesando archivo..."}),(0,s.jsxs)("span",{children:[d,"%"]})]}),(0,s.jsx)(k,{value:d,className:"w-full"})]})]})}var E=t(968);function L(e){let{className:a,...t}=e;return(0,s.jsx)(E.b,{"data-slot":"label",className:o("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}var q=t(8715),_=t(6474),z=t(5196),T=t(7863);function F(e){let{...a}=e;return(0,s.jsx)(q.bL,{"data-slot":"select",...a})}function O(e){let{...a}=e;return(0,s.jsx)(q.WT,{"data-slot":"select-value",...a})}function D(e){let{className:a,size:t="default",children:r,...n}=e;return(0,s.jsxs)(q.l9,{"data-slot":"select-trigger","data-size":t,className:o("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...n,children:[r,(0,s.jsx)(q.In,{asChild:!0,children:(0,s.jsx)(_.A,{className:"size-4 opacity-50"})})]})}function B(e){let{className:a,children:t,position:r="popper",...n}=e;return(0,s.jsx)(q.ZL,{children:(0,s.jsxs)(q.UC,{"data-slot":"select-content",className:o("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...n,children:[(0,s.jsx)(A,{}),(0,s.jsx)(q.LM,{className:o("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(P,{})]})})}function M(e){let{className:a,children:t,...r}=e;return(0,s.jsxs)(q.q7,{"data-slot":"select-item",className:o("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(q.VF,{children:(0,s.jsx)(z.A,{className:"size-4"})})}),(0,s.jsx)(q.p4,{children:t})]})}function A(e){let{className:a,...t}=e;return(0,s.jsx)(q.PP,{"data-slot":"select-scroll-up-button",className:o("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(T.A,{className:"size-4"})})}function P(e){let{className:a,...t}=e;return(0,s.jsx)(q.wn,{"data-slot":"select-scroll-down-button",className:o("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(_.A,{className:"size-4"})})}function R(e){let{className:a,...t}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:o("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...t})}function V(e){var a;let{onDataLoaded:t,onError:n,loading:l,setLoading:i}=e,[o,d]=(0,r.useState)({type:"mysql",host:"localhost",port:3306,username:"",password:"",database:"",query:"SELECT * FROM tabla_ejemplo LIMIT 100;"}),c=(e,a)=>{d(t=>({...t,[e]:a}))},u=async()=>{if(!o.query.trim())return void n("La consulta SQL es requerida");if("sqlite"!==o.type&&(!o.host||!o.username||!o.database))return void n("Por favor completa todos los campos requeridos");i(!0);try{let e=await fetch("/api/database",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),a=await e.json();if(!e.ok)throw Error(a.error||"Error al conectar con la base de datos");if(!a.data||!Array.isArray(a.data))throw Error("Formato de respuesta inv\xe1lido");if(0===a.data.length)return void n("La consulta no devolvi\xf3 resultados");t(a.data)}catch(e){console.error("Database connection error:",e),n(e instanceof Error?e.message:"Error desconocido al conectar")}finally{i(!1)}},x=e=>{switch(e){case"mysql":default:return 3306;case"postgresql":return 5432;case"sqlite":return}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"db-type",children:"Tipo de Base de Datos"}),(0,s.jsxs)(F,{value:o.type,onValueChange:e=>{d(a=>({...a,type:e,port:x(e)}))},children:[(0,s.jsx)(D,{children:(0,s.jsx)(O,{placeholder:"Selecciona el tipo"})}),(0,s.jsxs)(B,{children:[(0,s.jsx)(M,{value:"mysql",children:"MySQL"}),(0,s.jsx)(M,{value:"postgresql",children:"PostgreSQL"}),(0,s.jsx)(M,{value:"sqlite",children:"SQLite"})]})]})]}),"sqlite"!==o.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"host",children:"Host"}),(0,s.jsx)(N,{id:"host",value:o.host||"",onChange:e=>c("host",e.target.value),placeholder:"localhost",disabled:l})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"port",children:"Puerto"}),(0,s.jsx)(N,{id:"port",type:"number",value:o.port||"",onChange:e=>c("port",parseInt(e.target.value)||3306),placeholder:null==(a=x(o.type))?void 0:a.toString(),disabled:l})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"username",children:"Usuario"}),(0,s.jsx)(N,{id:"username",value:o.username||"",onChange:e=>c("username",e.target.value),placeholder:"usuario",disabled:l})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"password",children:"Contrase\xf1a"}),(0,s.jsx)(N,{id:"password",type:"password",value:o.password||"",onChange:e=>c("password",e.target.value),placeholder:"contrase\xf1a",disabled:l})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"database",children:"sqlite"===o.type?"Archivo de Base de Datos":"Nombre de la Base de Datos"}),(0,s.jsx)(N,{id:"database",value:o.database||"",onChange:e=>c("database",e.target.value),placeholder:"sqlite"===o.type?"/ruta/al/archivo.db":"nombre_bd",disabled:l})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"query",children:"Consulta SQL"}),(0,s.jsx)(R,{id:"query",value:o.query,onChange:e=>c("query",e.target.value),placeholder:"SELECT * FROM tabla WHERE condicion = 'valor';",rows:4,disabled:l}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Escribe tu consulta SQL. Se recomienda usar LIMIT para evitar cargar demasiados datos."})]}),(0,s.jsx)(m,{className:"bg-muted/50",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Ejemplos de Consultas"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("code",{className:"bg-background px-2 py-1 rounded text-xs",children:"SELECT * FROM usuarios LIMIT 50;"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs mt-1",children:"Obtener los primeros 50 usuarios"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("code",{className:"bg-background px-2 py-1 rounded text-xs",children:"SELECT nombre, email FROM clientes WHERE activo = 1;"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs mt-1",children:"Obtener clientes activos"})]})]})]})}),(0,s.jsx)(y,{onClick:u,disabled:l,className:"w-full",children:l?"Conectando...":"Conectar y Consultar"})]})}function I(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:o("w-full caption-bottom text-sm",a),...t})})}function U(e){let{className:a,...t}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:o("[&_tr]:border-b",a),...t})}function Q(e){let{className:a,...t}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:o("[&_tr:last-child]:border-0",a),...t})}function W(e){let{className:a,...t}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:o("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...t})}function J(e){let{className:a,...t}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:o("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})}function H(e){let{className:a,...t}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:o("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})}function Z(e){let{data:a,searchQuery:t="",searchType:n="partial"}=e,[l,i]=(0,r.useState)(1),[o,d]=(0,r.useState)(10),[c,u]=(0,r.useState)(null),[x,h]=(0,r.useState)("asc"),p=(0,r.useMemo)(()=>0===a.length?[]:Object.keys(a[0]),[a]),g=(0,r.useMemo)(()=>c?[...a].sort((e,a)=>{let t=e[c],s=a[c];if(null==t&&null==s)return 0;if(null==t)return"asc"===x?-1:1;if(null==s)return"asc"===x?1:-1;let r=String(t).toLowerCase(),n=String(s).toLowerCase();return r<n?"asc"===x?-1:1:r>n?"asc"===x?1:-1:0}):a,[a,c,x]),v=Math.ceil(g.length/o),j=(l-1)*o,b=j+o,N=g.slice(j,b),w=(e,a)=>{if(!a||!e)return e;let t=String(e),r=String(a);if("exact"===n)return t.toLowerCase()===r.toLowerCase()?(0,s.jsx)("mark",{className:"bg-yellow-200 dark:bg-yellow-800",children:t}):t;{let e=RegExp("(".concat(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return t.split(e).map((a,t)=>e.test(a)?(0,s.jsx)("mark",{className:"bg-yellow-200 dark:bg-yellow-800",children:a},t):a)}},k=e=>{c===e?h("asc"===x?"desc":"asc"):(u(e),h("asc"))},C=e=>{i(e)};return 0===a.length?(0,s.jsx)(m,{children:(0,s.jsx)(f,{className:"flex flex-col items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"No hay datos para mostrar"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:t?"No se encontraron resultados para tu b\xfasqueda":"Carga datos para comenzar"})]})})}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Mostrar:"}),(0,s.jsxs)(F,{value:o.toString(),onValueChange:e=>{d(parseInt(e)),i(1)},children:[(0,s.jsx)(D,{className:"w-20",children:(0,s.jsx)(O,{})}),(0,s.jsxs)(B,{children:[(0,s.jsx)(M,{value:"5",children:"5"}),(0,s.jsx)(M,{value:"10",children:"10"}),(0,s.jsx)(M,{value:"25",children:"25"}),(0,s.jsx)(M,{value:"50",children:"50"}),(0,s.jsx)(M,{value:"100",children:"100"})]})]}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"registros por p\xe1gina"})]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["P\xe1gina ",l," de ",v," (",g.length," registros total)"]})]}),(0,s.jsx)(m,{children:(0,s.jsx)(f,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(I,{children:[(0,s.jsx)(U,{children:(0,s.jsx)(W,{children:p.map(e=>(0,s.jsx)(J,{className:"cursor-pointer hover:bg-muted/50 select-none",onClick:()=>k(e),children:(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("span",{children:e}),c===e&&(0,s.jsx)("span",{className:"text-xs",children:"asc"===x?"↑":"↓"})]})},e))})}),(0,s.jsx)(Q,{children:N.map((e,a)=>(0,s.jsx)(W,{children:p.map(a=>(0,s.jsx)(H,{className:"max-w-xs",children:(0,s.jsx)("div",{className:"truncate",title:String(e[a]||""),children:w(String(e[a]||""),t)})},a))},j+a))})]})})})}),v>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,s.jsx)(y,{variant:"outline",size:"sm",onClick:()=>C(l-1),disabled:1===l,children:"Anterior"}),(0,s.jsx)("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,v)},(e,a)=>{let t;return t=v<=5||l<=3?a+1:l>=v-2?v-4+a:l-2+a,(0,s.jsx)(y,{variant:l===t?"default":"outline",size:"sm",onClick:()=>C(t),children:t},t)})}),(0,s.jsx)(y,{variant:"outline",size:"sm",onClick:()=>C(l+1),disabled:l===v,children:"Siguiente"})]})]})}var $=t(4059),X=t(9428);function Y(e){let{className:a,...t}=e;return(0,s.jsx)($.bL,{"data-slot":"radio-group",className:o("grid gap-3",a),...t})}function G(e){let{className:a,...t}=e;return(0,s.jsx)($.q7,{"data-slot":"radio-group-item",className:o("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:(0,s.jsx)($.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,s.jsx)(X.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function K(e){let{columns:a,onSearch:t,searchConfig:n}=e,[l,i]=(0,r.useState)(n);(0,r.useEffect)(()=>{i(n)},[n]);let o=e=>{let a={...l,query:e};i(a),setTimeout(()=>{t(a)},300)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"search-input",children:"Buscar en los datos"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(N,{id:"search-input",type:"text",placeholder:"Escribe tu b\xfasqueda aqu\xed...",value:l.query,onChange:e=>o(e.target.value),className:"w-full"})}),l.query&&(0,s.jsx)(y,{variant:"outline",onClick:()=>{let e={...l,query:""};i(e),t(e)},children:"Limpiar"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(L,{children:"Tipo de b\xfasqueda"}),(0,s.jsxs)(Y,{value:l.searchType,onValueChange:e=>{let a={...l,searchType:e};i(a),t(a)},className:"flex flex-col space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(G,{value:"partial",id:"partial"}),(0,s.jsx)(L,{htmlFor:"partial",className:"text-sm font-normal",children:"B\xfasqueda parcial"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(G,{value:"exact",id:"exact"}),(0,s.jsx)(L,{htmlFor:"exact",className:"text-sm font-normal",children:"B\xfasqueda exacta"})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"partial"===l.searchType?"Encuentra coincidencias que contengan el texto buscado":"Encuentra solo coincidencias exactas"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(L,{htmlFor:"column-select",children:"Buscar en columna espec\xedfica"}),(0,s.jsxs)(F,{value:l.column||"all",onValueChange:e=>{let a={...l,column:"all"===e?void 0:e};i(a),t(a)},children:[(0,s.jsx)(D,{children:(0,s.jsx)(O,{placeholder:"Selecciona una columna"})}),(0,s.jsxs)(B,{children:[(0,s.jsx)(M,{value:"all",children:"Todas las columnas"}),a.map(e=>(0,s.jsx)(M,{value:e,children:e},e))]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:l.column?'Buscando solo en la columna "'.concat(l.column,'"'):"Buscando en todas las columnas"})]})]}),l.query&&(0,s.jsx)("div",{className:"bg-muted/50 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"B\xfasqueda actual:"}),' "',l.query,'"']}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Tipo:"})," ","partial"===l.searchType?"Parcial":"Exacta"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Columna:"})," ",l.column||"Todas"]})]})}),(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Consejos de b\xfasqueda:"}),(0,s.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1",children:[(0,s.jsx)("li",{children:"• La b\xfasqueda no distingue entre may\xfasculas y min\xfasculas"}),(0,s.jsx)("li",{children:"• Usa b\xfasqueda parcial para encontrar texto dentro de palabras"}),(0,s.jsx)("li",{children:"• Usa b\xfasqueda exacta para coincidencias precisas"}),(0,s.jsx)("li",{children:"• Selecciona una columna espec\xedfica para b\xfasquedas m\xe1s precisas"})]})]})]})}var ee=t(8698);function ea(e){let{...a}=e;return(0,s.jsx)(ee.bL,{"data-slot":"dropdown-menu",...a})}function et(e){let{...a}=e;return(0,s.jsx)(ee.l9,{"data-slot":"dropdown-menu-trigger",...a})}function es(e){let{className:a,sideOffset:t=4,...r}=e;return(0,s.jsx)(ee.ZL,{children:(0,s.jsx)(ee.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:o("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...r})})}function er(e){let{className:a,inset:t,variant:r="default",...n}=e;return(0,s.jsx)(ee.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":r,className:o("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...n})}var en=t(5452),el=t(4416);function ei(e){let{...a}=e;return(0,s.jsx)(en.bL,{"data-slot":"dialog",...a})}function eo(e){let{...a}=e;return(0,s.jsx)(en.l9,{"data-slot":"dialog-trigger",...a})}function ed(e){let{...a}=e;return(0,s.jsx)(en.ZL,{"data-slot":"dialog-portal",...a})}function ec(e){let{className:a,...t}=e;return(0,s.jsx)(en.hJ,{"data-slot":"dialog-overlay",className:o("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function eu(e){let{className:a,children:t,...r}=e;return(0,s.jsxs)(ed,{"data-slot":"dialog-portal",children:[(0,s.jsx)(ec,{}),(0,s.jsxs)(en.UC,{"data-slot":"dialog-content",className:o("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...r,children:[t,(0,s.jsxs)(en.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(el.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ex(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:o("flex flex-col gap-2 text-center sm:text-left",a),...t})}function em(e){let{className:a,...t}=e;return(0,s.jsx)(en.hE,{"data-slot":"dialog-title",className:o("text-lg leading-none font-semibold",a),...t})}function eh(e){let{className:a,...t}=e;return(0,s.jsx)(en.VY,{"data-slot":"dialog-description",className:o("text-muted-foreground text-sm",a),...t})}function ep(e){let{data:a}=e,[t,n]=(0,r.useState)(!1),[l,i]=(0,r.useState)("csv"),[o,d]=(0,r.useState)("datos_exportados"),[c,u]=(0,r.useState)(!1),x=(e,a,t)=>{let s=e instanceof Blob?e:new Blob([e],{type:t}),r=URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},m=()=>{if(0===a.length)return;let e=Object.keys(a[0]);x([e.join(","),...a.map(a=>e.map(e=>{let t=String(a[e]||"");return t.includes(",")||t.includes('"')||t.includes("\n")?'"'.concat(t.replace(/"/g,'""'),'"'):t}).join(","))].join("\n"),"".concat(o,".csv"),"text/csv;charset=utf-8;")},h=()=>{if(0===a.length)return;let e=C.Wp.json_to_sheet(a),t=C.Wp.book_new();C.Wp.book_append_sheet(t,e,"Datos"),x(new Blob([C.M9(t,{bookType:"xlsx",type:"array"})],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),"".concat(o,".xlsx"),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")},p=()=>{0!==a.length&&x(JSON.stringify(a,null,2),"".concat(o,".json"),"application/json")},g=async()=>{if(0===a.length)return void alert("No hay datos para exportar");u(!0);try{switch(l){case"csv":m();break;case"excel":h();break;case"json":p()}n(!1)}catch(e){console.error("Error exporting data:",e),alert("Error al exportar los datos")}finally{u(!1)}},f=e=>{if(0===a.length)return void alert("No hay datos para exportar");let t="datos_".concat(new Date().toISOString().split("T")[0]);switch(e){case"csv":d(t),i("csv"),m();break;case"excel":d(t),i("excel"),h();break;case"json":d(t),i("json"),p()}};return 0===a.length?(0,s.jsx)(y,{variant:"outline",disabled:!0,children:"Exportar Datos"}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(ea,{children:[(0,s.jsx)(et,{asChild:!0,children:(0,s.jsx)(y,{variant:"outline",children:"Exportar R\xe1pido"})}),(0,s.jsxs)(es,{children:[(0,s.jsx)(er,{onClick:()=>f("csv"),children:(0,s.jsx)("span",{children:"CSV"})}),(0,s.jsx)(er,{onClick:()=>f("excel"),children:(0,s.jsx)("span",{children:"Excel (.xlsx)"})}),(0,s.jsx)(er,{onClick:()=>f("json"),children:(0,s.jsx)("span",{children:"JSON"})})]})]}),(0,s.jsxs)(ei,{open:t,onOpenChange:n,children:[(0,s.jsx)(eo,{asChild:!0,children:(0,s.jsx)(y,{children:"Exportar Personalizado"})}),(0,s.jsxs)(eu,{className:"sm:max-w-md",children:[(0,s.jsxs)(ex,{children:[(0,s.jsx)(em,{children:"Exportar Datos"}),(0,s.jsx)(eh,{children:"Personaliza las opciones de exportaci\xf3n para tus datos."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"export-format",children:"Formato de exportaci\xf3n"}),(0,s.jsxs)(F,{value:l,onValueChange:e=>i(e),children:[(0,s.jsx)(D,{children:(0,s.jsx)(O,{placeholder:"Selecciona un formato"})}),(0,s.jsxs)(B,{children:[(0,s.jsx)(M,{value:"csv",children:"CSV (Comma Separated Values)"}),(0,s.jsx)(M,{value:"excel",children:"Excel (.xlsx)"}),(0,s.jsx)(M,{value:"json",children:"JSON (JavaScript Object Notation)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L,{htmlFor:"filename",children:"Nombre del archivo"}),(0,s.jsx)(N,{id:"filename",value:o,onChange:e=>d(e.target.value),placeholder:"nombre_archivo"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"La extensi\xf3n se agregar\xe1 autom\xe1ticamente"})]}),(0,s.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Informaci\xf3n de exportaci\xf3n:"}),(0,s.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1",children:[(0,s.jsxs)("li",{children:["• Registros a exportar: ",a.length]}),(0,s.jsxs)("li",{children:["• Columnas: ",a.length>0?Object.keys(a[0]).length:0]}),(0,s.jsxs)("li",{children:["• Formato: ",l.toUpperCase()]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(y,{variant:"outline",onClick:()=>n(!1),disabled:c,children:"Cancelar"}),(0,s.jsx)(y,{onClick:g,disabled:c||!o.trim(),children:c?"Exportando...":"Exportar"})]})]})]})]})]})}let eg=(0,j.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ef(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:o(eg({variant:t}),a),...r})}function ev(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:o("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...t})}function ej(){let[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(!1),[o,v]=(0,r.useState)(null),[j,b]=(0,r.useState)({query:"",searchType:"partial",column:void 0}),y=e=>{a(e),n(e),v(null)},N=e=>{v(e),i(!1)},w=e.length>0?Object.keys(e[0]):[];return(0,s.jsxs)("div",{className:"space-y-6",children:[o&&(0,s.jsx)(ef,{variant:"destructive",children:(0,s.jsx)(ev,{children:o})}),(0,s.jsxs)(d,{defaultValue:"excel",className:"w-full",children:[(0,s.jsxs)(c,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(u,{value:"excel",children:"Cargar Excel"}),(0,s.jsx)(u,{value:"database",children:"Conectar Base de Datos"})]}),(0,s.jsx)(x,{value:"excel",className:"space-y-4",children:(0,s.jsxs)(m,{children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(p,{children:"Cargar Archivo Excel"}),(0,s.jsx)(g,{children:"Sube un archivo Excel (.xlsx, .xls) o CSV para importar los datos"})]}),(0,s.jsx)(f,{children:(0,s.jsx)(S,{onDataLoaded:y,onError:N,loading:l,setLoading:i})})]})}),(0,s.jsx)(x,{value:"database",className:"space-y-4",children:(0,s.jsxs)(m,{children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(p,{children:"Conectar a Base de Datos"}),(0,s.jsx)(g,{children:"Conecta a MySQL, PostgreSQL o SQLite para importar datos"})]}),(0,s.jsx)(f,{children:(0,s.jsx)(V,{onDataLoaded:y,onError:N,loading:l,setLoading:i})})]})})]}),e.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(m,{children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(p,{children:"Buscar en los Datos"}),(0,s.jsx)(g,{children:"Busca informaci\xf3n espec\xedfica en los datos importados"})]}),(0,s.jsx)(f,{children:(0,s.jsx)(K,{columns:w,onSearch:a=>{if(b(a),!a.query.trim())return void n(e);n(e.filter(e=>{let t=a.query.toLowerCase();if(!a.column||"all"===a.column)return Object.values(e).some(e=>{let s=String(e||"").toLowerCase();return"exact"===a.searchType?s===t:s.includes(t)});{let s=String(e[a.column]||"").toLowerCase();return"exact"===a.searchType?s===t:s.includes(t)}}))},searchConfig:j})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",t.length," de ",e.length," registros",j.query&&(0,s.jsxs)("span",{className:"ml-2 font-medium",children:['para "',j.query,'"']})]}),(0,s.jsx)(ep,{data:t})]}),(0,s.jsx)(Z,{data:t,searchQuery:j.query,searchType:j.searchType})]}),0===e.length&&!l&&(0,s.jsx)(m,{children:(0,s.jsx)(f,{className:"flex flex-col items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"No hay datos cargados"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Selecciona una pesta\xf1a arriba para cargar datos desde Excel o una base de datos"})]})})})]})}},2383:()=>{},3686:()=>{},9766:(e,a,t)=>{Promise.resolve().then(t.bind(t,870))}},e=>{var a=a=>e(e.s=a);e.O(0,[524,807,441,684,358],()=>a(9766)),_N_E=e.O()}]);